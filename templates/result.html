<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Felix Archive</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;900&display=swap" rel="stylesheet">
  <link href="{{ url_for('static',filename='materialize.min.css') }}" type="text/css" rel="stylesheet"
        media="screen,projection"/>
  <link href="{{ url_for('static',filename='style.css') }}" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>

<body>
<nav class="black" role="navigation">
  <div class="nav-wrapper container">
    <a href="/" class="brand-logo center">Felix Archive</a>
  </div>
</nav>

<main>
  <div class="container">
    <div class="row">
      <div class="col s12 m12 l10 offset-l1">
        <h3>Search Results</h3>
        <form action="/search" id="search_form">
          <div class="search-field input-field">
            <button class="btn black waves-effect waves-light" type="submit">
              <span>Search</span>
            </button>
            <div class="search-text-wrapper">
              <input class="search-text" type="text" value="{{ request.args.get('q') }}" name="q">
            </div>
          </div>
        </form>
        <div class="row" style="margin-bottom: 0;">
          <div class="input-field col s6 offset-s6 m3 offset-m9" style="margin-bottom: 0">
            <select name="sort" id="sort_by" form="search_form">
              <option value="score desc" {% if request.args.get('sort') == 'score desc'%} selected {% endif %}>Relevance</option>
              <option value="date asc" {% if request.args.get('sort') == 'date asc'%} selected {% endif %}>Oldest First</option>
              <option value="date desc" {% if request.args.get('sort') == 'date desc'%} selected {% endif %}>Newest First</option>
            </select>
          </div>
        </div>

        {% for result in results %}
          <div class="section">
            <div class="row" style="margin-bottom: 5px;">
              <div class="col s4">
                <span style="font-size: 1.64rem;line-height: 110%;margin: 1.0933333333rem 0 0.656rem 0;">Issue {{ result.issue }}</span>
              </div>
              <div class="col s8 right-align">
                <span>{{ result.date }}</span>
              </div>
            </div>
            <div class="page-result">
              <span class="grey-text">Page {{ result.page }}</span>
              <br>
              <div class="text-hit">
                {{ result.highlighted|safe }}
              </div>
            </div>
          </div>
          <div class="divider"></div>
        {% endfor %}
        <div class="row center">
          <ul class="pagination">
            {{ paginator.left|safe }}
            {% for page_button in paginator.page_buttons %}
              {{ page_button|safe }}
            {% endfor %}
            {{ paginator.right|safe }}
          </ul>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="page-footer grey darken-3">
  <div class="container">
    <div class="row">
      <div class="col l6 s12">
        <h5 class="white-text">Felix 1949-2020</h5>
        <p>Felix, Beit Quad, Prince Consort Road, London, SW7 2BB.
          <br>
          020 7594 8072
          <br>
          felix@uk.ac.imperial
          <span class="grey-text darken-2">
              (swap the domain endianness)
            </span>
        </p>
      </div>
    </div>
  </div>
</footer>


<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="{{ url_for('static',filename='materialize.min.js') }}"></script>
<script src="{{ url_for('static',filename='init.js') }}"></script>
</body>

</html>